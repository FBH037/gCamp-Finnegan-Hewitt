<h1 class = "page-header"><%=@project.name + " :Manage Members"%></h1>

<ol class= 'breadcrumb'>
  <li><a href= '/projects'>Projects</a></li>
  <li><%=link_to @project.name, project_path(@project)%></li>
  <li class='active'>Memberships</li>
</ol>

<%= render partial: "shared/errors", locals: {object: @membership} %>
<% if params[:error] %>
<div id="error_explanation" class= "col-md-offset-1 col-md-10 alert alert-danger">
  <ul>
    <%=params[:error]%>
  </ul>
</div>
<% end %>

<div class="row">
  <div class= "col-md-12">
    <div class= "well form-inline">
      <%= form_for [@project, @membership] do |f|%>
          <%= f.collection_select(:user_id, User.all, :id, :full_name, {prompt: "Please select a user..."}, class: "form-control")%>
          <%= f.select(:role, [["Member", :member],["Owner", :owner]],  {prompt: "this is a blank"}, class: "form-control")%>
          <%= f.submit "Add New Member", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
</div>

<table>
  <tbody>
    <% @memberships.each do |membership|%>
      <tr>
        <td> <%= link_to membership.user.full_name, user_path(membership.user)%> </td>
        <td class= "form-inline">

          <%= form_for [@project, membership], action: :update do |f|%>
          <%= f.select(:role, [["Member", :member],["Owner", :owner] ], {blank: "this is a blank"} , class: "form-control")%>
          <%= f.submit class: "btn btn-primary"%>
          <% end  %>
        </td>
        <td>
          <%= link_to project_membership_path(@project, membership), method: :delete, class: "btn btn-default" do %>
          <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
          <% end %>
        </td>
      </tr>
    <%end %>
  </tbody>
</table>
